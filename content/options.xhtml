<?xml version="1.0" encoding="UTF-8"?>
<!--
/*
 ***** BEGIN LICENSE BLOCK *****
 * This file is part of FiltaQuilla, Custom Filter Actions, by Mesquilla.
 *
 * FiltaQuilla is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 3 of the License, or
 * (at your option) any later version.
 *
 * You should have received a copy of the GNU General Public License
 * along with FiltaQuilla.  If not, see <http://www.gnu.org/licenses/>.
 *
 * Software distributed under the License is distributed on an "AS IS" basis,
 * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License
 * for the specific language governing rights and limitations under the
 * License.
 *
 * The Original Code is FiltaQuilla code.
 *
 * The Initial Developer of the Original Code is
 * Kent James <rkent@mesquilla.com>
 * Portions created by the Initial Developer are Copyright (C) 2008
 * the Initial Developer. All Rights Reserved.
 *
 * Contributor(s):
 *
 * ***** END LICENSE BLOCK *****
 */
-->

<?xml-stylesheet href="chrome://global/skin/" type="text/css"?>
<?xml-stylesheet type="text/css" href="chrome://messenger/skin/messenger.css" ?>
<?xml-stylesheet href="chrome://messenger/skin/preferences/preferences.css" type="text/css" ?>
<?xml-stylesheet href="resource://filtaquilla-skin/filtaquilla-prefs.css" type="text/css" ?>

<dialog id="filtaquillaPreferences"
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul"
        xmlns:html="http://www.w3.org/1999/xhtml"
        title="__MSG_prefwindow.title__"
        >
        
  <script type="application/javascript" src="chrome://filtaquilla/content/options.js"/>
  <script type="application/javascript" src="chrome://filtaquilla/content/filtaquilla-util.js"/>

  <hbox class="title">FiltaQuilla
    <spacer flex="5" />
    <label id="fq-options-header-version" tooltiptext="click for change log!" onclick="onVersionClick();"> </label>
  </hbox>
  <prefpane id="pane1" label="__MSG_pane1.title__">
    <preferences>
      <preference id="subjectAppendEnabled" name="extensions.filtaquilla.subjectAppend.enabled" type="bool"/>
      <preference id="regexpCaseInsensitiveEnabled" name="extensions.filtaquilla.regexpCaseInsensitive.enabled" type="bool"/>
      <preference id="subjectSuffixEnabled" name="extensions.filtaquilla.subjectSuffix.enabled" type="bool"/>
      <preference id="removeKeywordEnabled" name="extensions.filtaquilla.removeKeyword.enabled" type="bool"/>
      <preference id="removeFlaggedEnabled" name="extensions.filtaquilla.removeFlagged.enabled" type="bool"/>
      <preference id="noBiffEnabled" name="extensions.filtaquilla.noBiff.enabled" type="bool"/>
      <preference id="copyAsReadEnabled" name="extensions.filtaquilla.copyAsRead.enabled" type="bool"/>
      <preference id="markUnreadEnabled" name="extensions.filtaquilla.markUnread.enabled" type="bool"/>
      <preference id="markRepliedEnabled" name="extensions.filtaquilla.markReplied.enabled" type="bool"/>
      <preference id="launchFileEnabled" name="extensions.filtaquilla.launchFile.enabled" type="bool"/>
      <preference id="runFileEnabled" name="extensions.filtaquilla.runFile.enabled" type="bool"/>
      <preference id="trainAsJunkEnabled" name="extensions.filtaquilla.trainAsJunk.enabled" type="bool"/>
      <preference id="trainAsGoodEnabled" name="extensions.filtaquilla.trainAsGood.enabled" type="bool"/>
      <preference id="printEnabled" name="extensions.filtaquilla.print.enabled" type="bool"/>
      <preference id="addSenderEnabled" name="extensions.filtaquilla.addSender.enabled" type="bool"/>
      <preference id="saveAttachmentEnabled" name="extensions.filtaquilla.saveAttachment.enabled" type="bool"/>
      <preference id="detachAttachmentsEnabled" name="extensions.filtaquilla.detachAttachments.enabled" type="bool"/>
      <preference id="javascriptActionEnabled" name="extensions.filtaquilla.javascriptAction.enabled" type="bool"/>
      <preference id="javascriptActionBodyEnabled" name="extensions.filtaquilla.javascriptActionBody.enabled" type="bool"/>
      <preference id="tonequillaEnabled" name="extensions.filtaquilla.tonequilla.enabled" type="bool"/>

      <preference id="saveMessageAsFileEnabled" name="extensions.filtaquilla.saveMessageAsFile.enabled" type="bool"/>
      <preference id="moveLaterEnabled" name="extensions.filtaquilla.moveLater.enabled" type="bool"/>
      <preference id="SubjectRegexEnabled" name="extensions.filtaquilla.SubjectRegexEnabled" type="bool"/>
      <preference id="HeaderRegexEnabled" name="extensions.filtaquilla.HeaderRegexEnabled" type="bool"/>
      <preference id="AttachmentRegexEnabled" name="extensions.filtaquilla.AttachmentRegexEnabled" type="bool"/>
      <preference id="BodyRegexEnabled" name="extensions.filtaquilla.BodyRegexEnabled" type="bool"/>
      <preference id="SubjectBodyRegexEnabled" name="extensions.filtaquilla.SubjectBodyRegexEnabled" type="bool"/>
      <preference id="JavascriptEnabled" name="extensions.filtaquilla.JavascriptEnabled" type="bool"/>
      <preference id="SearchBccEnabled" name="extensions.filtaquilla.SearchBccEnabled" type="bool"/>
      <preference id="FolderNameEnabled" name="extensions.filtaquilla.FolderNameEnabled" type="bool"/>
      <preference id="ThreadHeadTagEnabled" name="extensions.filtaquilla.ThreadHeadTagEnabled" type="bool"/>
      <preference id="ThreadAnyTagEnabled" name="extensions.filtaquilla.ThreadAnyTagEnabled" type="bool"/>
			<preference id="debug" name="extensions.filtaquilla.debug" type="bool"/>
    </preferences>
    <vbox>
    <tabbox id="filtaquillatabbox" flex="1">
      <tabs class="icontabs">
        <tab label="__MSG_filterActions__" id="filterActionsTab"/>
        <tab label="__MSG_searchTerms__" id="conditionsTab"/>
        <tab label="__MSG_aboutAndSupport__" id="supportTab"/>
      </tabs>

      <tabpanels flex="1">
        <!-- Filter actions -->
        <tabpanel orient="vertical">
          <label value="__MSG_optionsIntro__"/>
          <div id="actionsGrid" class="grid-container">
          
            <span>
              <checkbox id="checkSubjectAppendEnabled" preference="subjectAppendEnabled"
                        label="__MSG_fq.subjectprepend__" 
                        accesskey="__MSG_fq.subjectprepend.access__"/>
              <toolbarbutton
                  class="helpLink"
                  onclick="FiltaQuilla.Util.openHelpTab('prepend_subject');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>

            <checkbox id="checkRemoveKeywordEnabled" preference="removeKeywordEnabled"
                      label="__MSG_fq.removekeyword__" 
                      accesskey="__MSG_fq.removekeyword.access__"/>
            <checkbox id="checkRemoveFlaggedEnabled" preference="removeFlaggedEnabled"
                      label="__MSG_fq.removeflagged__"
                      accesskey="__MSG_fq.removeflagged.access__"/>
            <span>
              <checkbox id="checknoBiffEnabled" preference="noBiffEnabled"
                        label="__MSG_fq.nobiff__" 
                        accesskey="__MSG_fq.nobiff.access__"/>
              <toolbarbutton
                  class="helpLink"
                  onclick="FiltaQuilla.Util.openHelpTab('do_not_notify');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>

            <span>
              <checkbox id="checkCopyAsReadEnabled" preference="copyAsReadEnabled"
                        label="__MSG_fq.copyAsRead__"
                        accesskey="__MSG_fq.copyAsRead.access__"/>
              <toolbarbutton
                  class="helpLink"
                  onclick="FiltaQuilla.Util.openHelpTab('copy_as_read');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>
            <checkbox id="checkMarkUnreadEnabled" preference="markUnreadEnabled"
                      label="__MSG_fq.markUnread__"
                      accesskey="__MSG_fq.markUnread.access__"/>
            <checkbox id="checkMarkRepliedEnabled" preference="markRepliedEnabled"
                      label="__MSG_fq.markReplied__"
                      accesskey="__MSG_fq.markReplied.access__"/>
            <span>
              <checkbox id="checkLaunchFileEnabled" preference="launchFileEnabled"
                        label="__MSG_fq.launchFile__"
                        accesskey="__MSG_fq.launchFile.access__"/>
              <toolbarbutton
                class="helpLink"
                onclick="FiltaQuilla.Util.openHelpTab('launch_file');"
                tooltiptext="__MSG_helpFeatureTip__"
                />
            </span>

            <span>
              <checkbox id="checkRunFileEnabled" preference="runFileEnabled"
                        label="__MSG_fq.runFile__"
                        accesskey="__MSG_fq.runFile.access__"/>
              <toolbarbutton
                class="helpLink"
                onclick="FiltaQuilla.Util.openHelpTab('run_file');"
                tooltiptext="__MSG_helpFeatureTip__"
                />
            </span>
            <span>
              <checkbox id="checkTrainAsJunkEnabled" preference="trainAsJunkEnabled"
                        label="__MSG_fq.trainJunk__"
                        accesskey="__MSG_fq.trainJunk.access__"/>
              <toolbarbutton
                  class="helpLink"
                  onclick="FiltaQuilla.Util.openHelpTab('train_as_junk');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>
            <checkbox id="checkTrainAsGoodEnabled" preference="trainAsGoodEnabled"
                      label="__MSG_fq.trainGood__"
                      accesskey="__MSG_fq.trainGood.access__"/>
            <checkbox id="checkPrintEnabled" preference="printEnabled"
                      label="__MSG_fq.print__"
                      accesskey="__MSG_fq.print.access__"/>

            <span>
              <checkbox id="checkSubjectSuffixEnabled" preference="subjectSuffixEnabled"
                        label="__MSG_fq.subjectappend__" 
                        accesskey="__MSG_fq.subjectappend.access__"/>
              <toolbarbutton
                  class="helpLink"
                  onclick="FiltaQuilla.Util.openHelpTab('prepend_subject');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>

            <span>
              <checkbox id="checkDetachAttachmentsEnabled" preference="detachAttachmentsEnabled"
                        label="__MSG_fq.detachAttachments__"
                        accesskey="__MSG_fq.detachAttachments.access__"/>
              <toolbarbutton
                  class="helpLink"
                  onclick="FiltaQuilla.Util.openHelpTab('detach_attachment');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>
            <checkbox id="checkSaveMessageAsFileEnabled" preference="saveMessageAsFileEnabled"
                      label="__MSG_fq.saveMsgAsFile__"
                      accesskey="__MSG_fq.saveMsgAsFile.access__"/>
            <span>
              <checkbox id="checkMoveLaterEnabled" preference="moveLaterEnabled"
                        label="__MSG_fq.moveLater__"
                        accesskey="__MSG_fq.moveLater.access__"/>
              <toolbarbutton
                  class="helpLink"
                  onclick="FiltaQuilla.Util.openHelpTab('move_later');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>

            <checkbox id="checkAddSenderEnabled" preference="addSenderEnabled"
                      label="__MSG_fq.addSender__"
                      accesskey="__MSG_fq.addSender.access__"/>
            <span>
              <checkbox id="checkSaveAttachmentEnabled" preference="saveAttachmentEnabled"
                        label="__MSG_fq.saveAttachment__"
                        accesskey="__MSG_fq.saveAttachment.access__"/>
              <toolbarbutton
                  class="helpLink"
                  onclick="FiltaQuilla.Util.openHelpTab('save_attachment');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>
            <checkbox id="checkJavascriptActionEnabled" preference="javascriptActionEnabled"
                      label="__MSG_fq.javascriptAction__"
                      accesskey="__MSG_fq.javascriptAction.access__"/>
            <span>
              <checkbox id="checkJavascriptActionBodyEnabled" preference="javascriptActionBodyEnabled"
                        label="__MSG_checkJavascriptActionBodyEnabled.label__"
                        accesskey="__MSG_checkJavascriptActionBodyEnabled.accesskey__"/>
              <toolbarbutton
                  class="helpLink"
                  onclick="FiltaQuilla.Util.openHelpTab('javascript_action');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>


            <checkbox id="checkTonequillaEnabled" 
                      preference="tonequillaEnabled"
                      label="__MSG_fq.toneQuilla__"/>
          
          <!-- dummy row because I have complaints about size ? -->
            <spacer height="20px" />
          </div>
        </tabpanel>
        <tabpanel orient="vertical">
          <label value="__MSG_optionsIntro__"/>
          <div id="conditionsGrid" class="grid-container">

            <span>
              <checkbox id="checkSubjectRegexEnabled" preference="SubjectRegexEnabled"
                        label="__MSG_fq.subjectRegex__"
                        accesskey="__MSG_fq.subjectRegex.access__"/>
              <toolbarbutton
                class="helpLink"
                onclick="FiltaQuilla.Util.openHelpTab('subject_regex');"
                />
            </span>
            <span>
              <checkbox id="checkHeaderRegexEnabled" preference="HeaderRegexEnabled"
                        label="__MSG_fq.hdrRegex__"
                        accesskey="__MSG_fq.hdrRegex.access__"/>
              <toolbarbutton
                class="helpLink"
                onclick="FiltaQuilla.Util.openHelpTab('header_regex');"
                tooltiptext="__MSG_helpFeatureTip__"
                />
            </span>
            <checkbox id="fq.Bcc" preference="SearchBccEnabled"
                      label="__MSG_fq.Bcc__"
                      accesskey="__MSG_fq.Bcc.access__"/>
            <span>
              <checkbox id="checkJavascriptEnabled" preference="JavascriptEnabled"
                        label="__MSG_checkJavascriptEnabled.label__"
                        accesskey="__MSG_checkJavascriptEnabled.accesskey__"/>
              <toolbarbutton
                  class="helpLink"
                  onclick="FiltaQuilla.Util.openHelpTab('match_javascript');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>


            <span>
              <checkbox id="checkThreadHeadTagEnabled" preference="ThreadHeadTagEnabled"
                        label="__MSG_fq.threadHeadTag__"
                        accesskey="__MSG_fq.threadHeadTag.access__"/>
              <toolbarbutton
                  class="helpLink"
                  onclick="FiltaQuilla.Util.openHelpTab('tag_thread_head');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>
            <span>
              <checkbox id="checkThreadAnyTagEnabled" preference="ThreadAnyTagEnabled"
                        label="__MSG_fq.threadAnyTag__"
                        accesskey="__MSG_fq.threadAnyTag.access__"/>
              <toolbarbutton
                  class="helpLink"
                  onclick="FiltaQuilla.Util.openHelpTab('tag_thread_msg');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>
            <span style="grid-column: 3 / span 2;">
              <checkbox id="checkFolderNameEnabled" preference="FolderNameEnabled"
                        label="__MSG_fq.folderName__"
                        accesskey="__MSG_fq.folderName.access__"/>
              <toolbarbutton
                  class="helpLink"
                  onclick="FiltaQuilla.Util.openHelpTab('match_folder_name');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>


            <div style="grid-column: 1 / span 4;" >
              <spacer></spacer>
              <hr />
            </div>
              
              
            <span>
              <checkbox id="checkAttachRegexEnabled"
                        preference="AttachmentRegexEnabled"
                        label="__MSG_fq.attachmentRegex__"
                        tooltip="As long as the filter mechanims in Thunderbird is synchronous, we cannot read attachmeent info during filtering."
                        disabled="true"/>
              <toolbarbutton
                  class="helpLinkDisabled"
                  onclick="FiltaQuilla.Util.openHelpTab('match_attachmentname');"
                  tooltiptext="__MSG_helpFeatureTip__"
                  />
            </span>
            <span>
              <checkbox id="checkSubjectBodyRegexEnabled" preference="SubjectBodyRegexEnabled" label="__MSG_fq.subjectBodyRegex__" />
              <toolbarbutton class="helpLink" onclick="FiltaQuilla.Util.openHelpTab('subjectbody_regex');" />

            </span>
            <span>
              <checkbox id="checkBodyRegexEnabled" 
                        preference="BodyRegexEnabled"
                        label="__MSG_fq.bodyRegex__"/>
              <toolbarbutton
                class="helpLink"
                onclick="FiltaQuilla.Util.openHelpTab('body_regex');"
                />
            </span>


          </div>
          <div height="10px" class="lineSpacer"/>
          <div>
            <checkbox id="checkRegexpCaseInsensitiveEnabled" 
                      preference="regexpCaseInsensitiveEnabled"
                      label="__MSG_fq.regex.caseInsensitive__"/>
          </div>
        </tabpanel>
        
        <tabpanel orient="vertical">
				  <vbox class="linkBox">
						<hbox>
							<spacer flex="1" />
							<a href="https://quickfilters.quickfolders.org/filtaquilla.html"
								 id="mesquillaLink"
								 class="buttonLink"
								 onclick="FiltaQuilla.Util.openHelpTab();window.close();">
								 __MSG_supportPage__
							</a>
							<spacer flex="1" />
						</hbox>
						<table class="linkDescriptionBox">
              <tr>
                <td>
                  <img src="resource://filtaquilla-skin/filtaquilla-32.png"
                       class="customLogo"
                       id="filtaquilla_img" />
                </td>
                <td>
                  <p class="linkDescription">
                    __MSG_supportPage_desc__
                  </p>
                </td>
              </tr>
						</table>
					</vbox>
				  
          <vbox class="linkBox">
						<hbox>
							<spacer flex="1" />
							<a href="https://addons.thunderbird.net/addon/quickfilters/"
								 id="quickFiltersLink"
								 class="buttonLink"
								 onclick="FiltaQuilla.Util.openLinkInTab('https://addons.thunderbird.net/addon/quickfilters/');window.close();">
								 __MSG_quickFiltersPage__
							</a>
							<spacer flex="1" />
						</hbox>
						<table class="linkDescriptionBox">
              <tr>
                <td>
                  <img src="resource://filtaquilla-skin/quickfilters.png"
                       class="customLogo"
                       id="quickfilters_img" />
                </td>
                <td>
                  <p class="linkDescription">
                    __MSG_quickFiltersPage_desc__
                  </p>
                </td>
              </tr>
						</table>
					</vbox>
          
				  <vbox class="linkBox">
						<hbox>
							<spacer flex="1" />
							<a href="https://quickfilters.quickfolders.org/filtaquilla.html#donate"
								 id="licenseLink"
								 class="buttonLink"
								 onclick="FiltaQuilla.Util.openLinkInTab('https://quickfilters.quickfolders.org/filtaquilla.html#donate');window.close();">
                 __MSG_supportFiltaquilla__
							</a>
							<spacer flex="1" />
						</hbox>
						<table class="linkDescriptionBox">
              <tr>
                <td>
                  <img src="resource://filtaquilla-skin/community.png"
                       class="customLogo"
                       id="community_img" />
                </td>
                <td>
                  <p class="linkDescription">
                    __MSG_supportFiltaquilla_desc__
                  </p>
                </td>
              </tr>
						</table>
					</vbox>
          
          
          
					<hbox>
						<spacer flex="1" />
						<checkbox id="checkJavascriptEnabled"
											preference="debug"
											instantApply="true"
											label="Debug"
											oncontextmenu="FiltaQuilla.Util.toggleBoolPreference(this,true);FiltaQuilla.Util.showAboutConfig(this, 'filtaquilla.debug', true);return false;"
											/>
					</hbox>
				</tabpanel>
			</tabpanels>
    </tabbox>
		</vbox>
  </prefpane>
	<script type="application/javascript" src="chrome://global/content/preferencesBindings.js" />
	<script>
	  /* FiltaQuilla.Util. */
    loadPreferences(); /* Tb 66 compatibility. Should be called _before_ DOMcontent Loaded event */
	</script>

</dialog>
